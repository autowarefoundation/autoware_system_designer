autoware_system_design_format: v0.1.0

name: TypeAlpha.system

variables:
  - name: vehicle_id
  - name: data_path
  - name: lanelet2_map_file
  - name: pointcloud_map_file

variable_files: []

modes:
  - name: default
    description: Default mode
    default: true
  - name: simulation
    description: Simulation mode

components:
  - name: lidar
    entity: LidarDummy.module
    namespace: sensing/lidar
    compute_unit: perception_ecu_1
  - name: map_loader
    entity: MapDummy.node
    namespace: map
    compute_unit: dummy_ecu_1
  - name: localizer
    entity: LocalizationDummy.node
    namespace: localization
    compute_unit: dummy_ecu_1
  - name: object_recognition
    entity: PerceptionA.module
    namespace: perception/object_recognition
    compute_unit: main_ecu
    parameter_set: [
      PerceptionModuleA.parameter_set
    ]
  - name: planner
    entity: PlanningDummy.node
    namespace: planning
    compute_unit: dummy_ecu_2

connections:
  - from: lidar.output.concatenated/pointcloud
    to: object_recognition.input.pointcloud
  - from: lidar.output.concatenated/pointcloud
    to: localizer.input.pointcloud
  - from: map_loader.output.vector_map
    to: localizer.input.lanelet_map
  - from: map_loader.output.vector_map
    to: object_recognition.input.vector_map
  - from: map_loader.output.vector_map
    to: planner.input.lanelet_map
  - from: object_recognition.output.objects
    to: planner.input.predicted_objects

simulation:
  override:
    components:
    - name: object_recognition
      entity: PerceptionB.module
      namespace: perception/object_recognition
      compute_unit: main_ecu
      parameter_set: [
        PerceptionModuleA.parameter_set,  
        PerceptionModuleABuild.parameter_set,
      ]