# Pre-commit configuration for autoware_system_designer
# Unified linting configuration that handles:
# - YAML linting (for all *.yaml and *.yml files)
# - Markdown linting (for all *.md files)
# - Prettier formatting (for all supported files)
# - System design format linting (custom linter for *.node.yaml, *.module.yaml, *.system.yaml, *.parameter_set.yaml)
#
# Dependencies are automatically installed by pre-commit in isolated environments

repos:
  # YAML linting - automatically installs yamllint
  - repo: https://github.com/adrienverge/yamllint
    rev: v1.37.1
    hooks:
      - id: yamllint
        name: YAML Lint
        args: [-c, .yamllint.yaml]
        files: \.ya?ml$
        exclude: \.(node|module|system|parameter_set)\.yaml$|\.param\.yaml$

  # Markdown linting - automatically installs markdownlint-cli
  - repo: https://github.com/igorshubovych/markdownlint-cli
    rev: v0.47.0
    hooks:
      - id: markdownlint
        name: Markdown Lint
        args: [-c, .markdownlint.yaml, --fix]
        files: \.md$

  # Prettier - opinionated code formatter
  - repo: https://github.com/pre-commit/mirrors-prettier
    rev: v4.0.0-alpha.8
    hooks:
      - id: prettier
        args: [--no-error-on-unmatched-pattern]
        exclude: \.param\.yaml$

  # System design format linting (local hook)
  - repo: local
    hooks:
      - id: lint-system-designs
        name: Lint System Design Files
        description: Lint autoware_system_design_format YAML files
        entry: python3 autoware_system_designer/autoware_system_designer/linter/run_lint.py
        language: system
        files: \.(node|module|system|parameter_set)\.yaml$
        pass_filenames: true
        require_serial: false
